@using Microsoft.Extensions.Options
@using Secyud.Secits.Blazor.Options
@using Volo.Abp.Localization
@inject SecitsStyleProvider SecitsStyleProvider
@inject IOptions<SecitsThemeOptions> ThemeOptions
@inject IOptions<SecitsScriptsOptions> ScriptsOptions

@foreach (var path in _styles)
{
    <script src="@path.Path" id="@path.Id"></script>
}


@code {

    private readonly List<HtmlPathResource> _styles = [];

    protected override async Task OnInitializedAsync()
    {
        var selectedStyle = await SecitsStyleProvider.GetSelectedStyleAsync();
        var option = new SecitsThemeParam();
        ThemeOptions.Value.Styles.GetValueOrDefault(selectedStyle)?.MapTo(option);
        option.IsRtl = CultureHelper.IsRtl;
        _styles.AddRange(ScriptsOptions.Value.Get(option));
    }

}
@using Microsoft.Extensions.Options
@using Secyud.Secits.Blazor
@using Secyud.Secits.Blazor.Options
@inject ISecitsStyleProvider SecitsStyleProvider
@inject IOptions<SecitsThemeOptions> ThemeOptions
@inject IOptions<SecitsStylesOptions> StylesOptions

@foreach (var path in _styles)
{
    <link href="@path.Path" id="@path.Id" type="text/css" rel="stylesheet" theme="secits"/>
}

@code {

    private readonly List<SecitsStyleFile> _styles = [];

    protected override async Task OnInitializedAsync()
    {
        var selectedStyle = await SecitsStyleProvider.GetCurrentStyleAsync();
        var option = ThemeOptions.Value.GenerateThemeInput(selectedStyle);
        _styles.Clear();
        _styles.AddRange(StylesOptions.Value.Get(option));
    }

}